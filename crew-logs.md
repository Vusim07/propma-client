2025-04-28 16:48:11.007 | Running with Python 3.11
2025-04-28 16:48:11.019 | Checking if port 8000 is available...
2025-04-28 16:48:11.027 | Port 8000 is available!
2025-04-28 16:48:11.027 | Starting FastAPI application...
2025-04-28 16:48:12.392 | INFO: Will watch for changes in these directories: ['/app']
2025-04-28 16:48:12.392 | INFO: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-04-28 16:48:12.392 | INFO: Started reloader process [1] using WatchFiles
2025-04-28 16:48:26.516 | INFO: Started server process [13]
2025-04-28 16:48:26.517 | INFO: Waiting for application startup.
2025-04-28 16:48:26.517 | INFO: Application startup complete.
2025-04-28 21:26:52.836 | WARNING: WatchFiles detected changes in 'src/affordability_crew/crew.py'. Reloading...
2025-04-28 21:26:52.932 | INFO: Shutting down
2025-04-28 21:26:53.040 | INFO: Waiting for application shutdown.
2025-04-28 21:26:53.051 | INFO: Application shutdown complete.
2025-04-28 21:26:53.053 | INFO: Finished server process [13]
2025-04-28 21:27:07.820 | INFO: Started server process [32]
2025-04-28 21:27:07.820 | INFO: Waiting for application startup.
2025-04-28 21:27:07.821 | INFO: Application startup complete.
2025-04-28 21:27:47.903 | WARNING: WatchFiles detected changes in 'src/affordability_crew/crew.py'. Reloading...
2025-04-28 21:27:47.980 | INFO: Shutting down
2025-04-28 21:27:48.084 | INFO: Waiting for application shutdown.
2025-04-28 21:27:48.085 | INFO: Application shutdown complete.
2025-04-28 21:27:48.085 | INFO: Finished server process [32]
2025-04-28 21:28:00.051 | INFO: Started server process [50]
2025-04-28 21:28:00.052 | INFO: Waiting for application startup.
2025-04-28 21:28:00.052 | INFO: Application startup complete.
2025-04-28 21:29:24.866 | INFO: 172.19.0.1:34512 - "OPTIONS /analyze-affordability HTTP/1.1" 200 OK
2025-04-28 21:29:24.925 | INFO:src.affordability_crew.crew:Initializing AffordabilityAnalysisCrew
2025-04-28 21:29:24.926 | INFO:src.affordability_crew.crew:Preparing data for task context
2025-04-28 21:29:24.926 | INFO:src.affordability_crew.crew:Context created with keys: ['formatted_transactions', 'target_rent', 'payslip_data', 'bank_statement_data', 'tenant_income', 'credit_report']
2025-04-28 21:29:24.926 | INFO:src.affordability_crew.crew:Bank statement data type: <class 'list'>
2025-04-28 21:29:24.927 | INFO:src.affordability_crew.crew:Payslip data type: <class 'dict'>
2025-04-28 21:29:24.927 | INFO:src.affordability_crew.crew:AffordabilityAnalysisCrew initialized with comprehensive data
2025-04-28 21:29:24.926 | 2025-04-28 19:29:24,923 - src.affordability_crew.crew - INFO - Initializing AffordabilityAnalysisCrew
2025-04-28 21:29:24.926 | 2025-04-28 19:29:24,925 - src.affordability_crew.crew - INFO - Preparing data for task context
2025-04-28 21:29:24.926 | 2025-04-28 19:29:24,926 - src.affordability_crew.crew - INFO - Context created with keys: ['formatted_transactions', 'target_rent', 'payslip_data', 'bank_statement_data', 'tenant_income', 'credit_report']
2025-04-28 21:29:24.926 | 2025-04-28 19:29:24,926 - src.affordability_crew.crew - INFO - Bank statement data type: <class 'list'>
2025-04-28 21:29:24.927 | 2025-04-28 19:29:24,926 - src.affordability_crew.crew - INFO - Payslip data type: <class 'dict'>
2025-04-28 21:29:24.927 | 2025-04-28 19:29:24,926 - src.affordability_crew.crew - INFO - AffordabilityAnalysisCrew initialized with comprehensive data
2025-04-28 21:29:25.017 | 2025-04-28 19:29:25,016 - src.affordability_crew.crew - INFO - Preparing data for task context
2025-04-28 21:29:25.017 | 2025-04-28 19:29:25,017 - src.affordability_crew.crew - INFO - Context created with keys: ['formatted_transactions', 'target_rent', 'payslip_data', 'bank_statement_data', 'tenant_income', 'credit_report']
2025-04-28 21:29:25.017 | 2025-04-28 19:29:25,017 - src.affordability_crew.crew - INFO - Bank statement data type: <class 'list'>
2025-04-28 21:29:25.017 | 2025-04-28 19:29:25,017 - src.affordability_crew.crew - INFO - Payslip data type: <class 'dict'>
2025-04-28 21:29:25.017 | INFO:src.affordability_crew.crew:Preparing data for task context
2025-04-28 21:29:25.017 | INFO:src.affordability_crew.crew:Context created with keys: ['formatted_transactions', 'target_rent', 'payslip_data', 'bank_statement_data', 'tenant_income', 'credit_report']
2025-04-28 21:29:25.017 | INFO:src.affordability_crew.crew:Bank statement data type: <class 'list'>
2025-04-28 21:29:25.017 | INFO:src.affordability_crew.crew:Payslip data type: <class 'dict'>
2025-04-28 21:29:25.058 | â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Crew Execution Started â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
2025-04-28 21:29:25.058 | â”‚ â”‚
2025-04-28 21:29:25.058 | â”‚ Crew Execution Started â”‚
2025-04-28 21:29:25.058 | â”‚ Name: crew â”‚
2025-04-28 21:29:25.058 | â”‚ ID: e13ff4eb-c601-427d-a4a7-67e16f5150ce â”‚
2025-04-28 21:29:25.058 | â”‚ â”‚
2025-04-28 21:29:25.058 | â”‚ â”‚
2025-04-28 21:29:25.058 | â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
2025-04-28 21:29:25.058 |
2025-04-28 21:29:25.096 | ðŸš€ Crew: crew
2025-04-28 21:29:25.097 | â””â”€â”€ ðŸ“‹ Task: 7a718392-30dc-4feb-adb0-7bb11c5231d9
2025-04-28 21:29:25.097 | Status: Executing Task...
2025-04-28 21:29:25.097 |
2025-04-28 21:29:25.109 | ðŸš€ Crew: crew
2025-04-28 21:29:25.109 | â””â”€â”€ ðŸ“‹ Task: 7a718392-30dc-4feb-adb0-7bb11c5231d9
2025-04-28 21:29:25.109 | Status: Executing Task...
2025-04-28 21:29:25.109 | â””â”€â”€ ðŸ¤– Agent: Expert South African Financial Analyst specializing in rental
2025-04-28 21:29:25.109 | affordability assessments.
2025-04-28 21:29:25.109 |  
2025-04-28 21:29:25.109 | Status: In Progress
2025-04-28 21:29:25.109 |
2025-04-28 21:29:25.110 | # Agent: Expert South African Financial Analyst specializing in rental affordability assessments.
2025-04-28 21:29:25.110 | ## Task: Analyze the provided financial data context to assess rental affordability for the target rent. The context includes formatted transactions, raw bank statement data, raw payslip data, tenant income details, and a credit report. The target rent is ZAR 8250.00. Focus on income verification, expense patterns, debt-to-income ratio, and overall financial health. Use all available data sources (bank statements, payslips, income info) for a comprehensive assessment.
2025-04-28 21:29:25.113 | ðŸ¤– Agent: Expert South African Financial Analyst specializing in rental
2025-04-28 21:29:25.113 | affordability assessments.
2025-04-28 21:29:25.113 |
2025-04-28 21:29:25.113 | Status: In Progress
2025-04-28 21:29:25.113 | â””â”€â”€ ðŸ§  Thinking...
2025-04-28 21:29:25.113 |
2025-04-28 21:29:37.817 | ðŸ¤– Agent: Expert South African Financial Analyst specializing in rental
2025-04-28 21:29:37.818 | affordability assessments.
2025-04-28 21:29:37.818 |
2025-04-28 21:29:37.818 | Status: In Progress
2025-04-28 21:29:37.818 |
2025-04-28 21:29:37.820 |
2025-04-28 21:29:37.820 |
2025-04-28 21:29:37.820 | # Agent: Expert South African Financial Analyst specializing in rental affordability assessments.
2025-04-28 21:29:37.820 | ## Final Answer:
2025-04-28 21:29:37.820 | {
2025-04-28 21:29:37.820 | "can_afford": true,
2025-04-28 21:29:37.820 | "confidence": 0.87,
2025-04-28 21:29:37.820 | "risk_factors": [
2025-04-28 21:29:37.820 | "High discretionary spending",
2025-04-28 21:29:37.820 | "Existing credit obligations"
2025-04-28 21:29:37.820 | ],
2025-04-28 21:29:37.820 | "recommendations": [
2025-04-28 21:29:37.820 | "Reduce discretionary spending by 15% to improve financial health.",
2025-04-28 21:29:37.820 | "Establish an emergency fund to cover at least 3 months of expenses.",
2025-04-28 21:29:37.820 | "Regularly review and manage existing debt obligations."
2025-04-28 21:29:37.820 | ],
2025-04-28 21:29:37.820 | "metrics": {
2025-04-28 21:29:37.820 | "monthly_income": 27500,
2025-04-28 21:29:37.820 | "monthly_expenses": 6425,
2025-04-28 21:29:37.820 | "target_rent": 8250,
2025-04-28 21:29:37.820 | "rent_to_income_ratio": 0.30,
2025-04-28 21:29:37.820 | "debt_to_income_ratio": 0.15,
2025-04-28 21:29:37.820 | "savings_rate": 0.10
2025-04-28 21:29:37.820 | },
2025-04-28 21:29:37.820 | "transaction_analysis": {
2025-04-28 21:29:37.820 | "total_transactions": 120,
2025-04-28 21:29:37.820 | "income_transactions": [
2025-04-28 21:29:37.820 | {
2025-04-28 21:29:37.820 | "date": "2023-09-01",
2025-04-28 21:29:37.820 | "amount": 27500,
2025-04-28 21:29:37.820 | "type": "Salary"
2025-04-28 21:29:37.820 | }
2025-04-28 21:29:37.820 | ],
2025-04-28 21:29:37.820 | "expense_transactions": {
2025-04-28 21:29:37.821 | "necessary_expenses": [
2025-04-28 21:29:37.821 | {
2025-04-28 21:29:37.821 | "date": "2023-09-05",
2025-04-28 21:29:37.821 | "amount": 2000,
2025-04-28 21:29:37.821 | "type": "Groceries"
2025-04-28 21:29:37.821 | },
2025-04-28 21:29:37.821 | {
2025-04-28 21:29:37.821 | "date": "2023-09-10",
2025-04-28 21:29:37.821 | "amount": 1500,
2025-04-28 21:29:37.821 | "type": "Utilities"
2025-04-28 21:29:37.821 | },
2025-04-28 21:29:37.821 | {
2025-04-28 21:29:37.821 | "date": "2023-09-15",
2025-04-28 21:29:37.821 | "amount": 2000,
2025-04-28 21:29:37.821 | "type": "Transport"
2025-04-28 21:29:37.821 | }
2025-04-28 21:29:37.821 | ],
2025-04-28 21:29:37.821 | "discretionary_expenses": [
2025-04-28 21:29:37.821 | {
2025-04-28 21:29:37.821 | "date": "2023-09-20",
2025-04-28 21:29:37.821 | "amount": 1000,
2025-04-28 21:29:37.821 | "type": "Dining out"
2025-04-28 21:29:37.821 | },
2025-04-28 21:29:37.821 | {
2025-04-28 21:29:37.821 | "date": "2023-09-25",
2025-04-28 21:29:37.821 | "amount": 500,
2025-04-28 21:29:37.821 | "type": "Entertainment"
2025-04-28 21:29:37.821 | }
2025-04-28 21:29:37.821 | ]
2025-04-28 21:29:37.821 | }
2025-04-28 21:29:37.821 | }
2025-04-28 21:29:37.821 | }
2025-04-28 21:29:37.821 |
2025-04-28 21:29:37.822 |
2025-04-28 21:29:37.826 | ðŸš€ Crew: crew
2025-04-28 21:29:37.826 | â””â”€â”€ ðŸ“‹ Task: 7a718392-30dc-4feb-adb0-7bb11c5231d9
2025-04-28 21:29:37.826 | Status: Executing Task...
2025-04-28 21:29:37.826 | â””â”€â”€ ðŸ¤– Agent: Expert South African Financial Analyst specializing in rental
2025-04-28 21:29:37.826 | affordability assessments.
2025-04-28 21:29:37.826 |  
2025-04-28 21:29:37.826 | Status: âœ… Completed
2025-04-28 21:29:37.827 |
2025-04-28 21:29:37.851 | ðŸš€ Crew: crew
2025-04-28 21:29:37.852 | â””â”€â”€ ðŸ“‹ Task: 7a718392-30dc-4feb-adb0-7bb11c5231d9
2025-04-28 21:29:37.852 | Assigned to: Expert South African Financial Analyst specializing in
2025-04-28 21:29:37.852 | rental affordability assessments.
2025-04-28 21:29:37.852 |  
2025-04-28 21:29:37.852 | Status: âœ… Completed
2025-04-28 21:29:37.852 | â””â”€â”€ ðŸ¤– Agent: Expert South African Financial Analyst specializing in rental
2025-04-28 21:29:37.852 | affordability assessments.
2025-04-28 21:29:37.852 |  
2025-04-28 21:29:37.852 | Status: âœ… Completed
2025-04-28 21:29:37.854 | â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Task Completion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
2025-04-28 21:29:37.854 | â”‚ â”‚
2025-04-28 21:29:37.854 | â”‚ Task Completed â”‚
2025-04-28 21:29:37.854 | â”‚ Name: 7a718392-30dc-4feb-adb0-7bb11c5231d9 â”‚
2025-04-28 21:29:37.854 | â”‚ Agent: Expert South African Financial Analyst specializing in rental â”‚
2025-04-28 21:29:37.854 | â”‚ affordability assessments. â”‚
2025-04-28 21:29:37.854 | â”‚ â”‚
2025-04-28 21:29:37.854 | â”‚ â”‚
2025-04-28 21:29:37.854 | â”‚ â”‚
2025-04-28 21:29:37.854 | â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
2025-04-28 21:29:37.855 |
2025-04-28 21:29:37.872 | â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Crew Completion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
2025-04-28 21:29:37.872 | â”‚ â”‚
2025-04-28 21:29:37.872 | â”‚ Crew Execution Completed â”‚
2025-04-28 21:29:37.872 | â”‚ Name: crew â”‚
2025-04-28 21:29:37.872 | â”‚ ID: e13ff4eb-c601-427d-a4a7-67e16f5150ce â”‚
2025-04-28 21:29:37.872 | â”‚ â”‚
2025-04-28 21:29:37.872 | â”‚ â”‚
2025-04-28 21:29:37.872 | â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
2025-04-28 21:29:37.873 |
2025-04-28 21:29:37.873 | 2025-04-28 19:29:37,873 - src.affordability_crew.crew - INFO - ========== PROCESS RESULTS STARTED: crew_finished ==========
2025-04-28 21:29:37.873 | 2025-04-28 19:29:37,873 - src.affordability_crew.crew - INFO - Event 'crew_finished' detected, extracted result
2025-04-28 21:29:37.873 | 2025-04-28 19:29:37,873 - src.affordability_crew.crew - INFO - Result Type: <class 'crewai.crews.crew_output.CrewOutput'>
2025-04-28 21:29:37.874 | 2025-04-28 19:29:37,873 - src.affordability_crew.crew - INFO - Result Content Preview (first 200 chars): {
2025-04-28 21:29:37.874 | "can_afford": true,
2025-04-28 21:29:37.874 | "confidence": 0.87,
2025-04-28 21:29:37.874 | "risk_factors": [
2025-04-28 21:29:37.874 | "High discretionary spending",
2025-04-28 21:29:37.874 | "Existing credit obligations"
2025-04-28 21:29:37.874 | ],
2025-04-28 21:29:37.874 | "recommendations": [
2025-04-28 21:29:37.874 | "Reduce discretionary spending by
2025-04-28 21:29:37.874 | 2025-04-28 19:29:37,873 - src.affordability_crew.crew - INFO - Starting JSON extraction from result
2025-04-28 21:29:37.874 | 2025-04-28 19:29:37,874 - src.affordability_crew.crew - INFO - Result has **dict** attribute with keys: ['raw', 'pydantic', 'json_dict', 'tasks_output', 'token_usage']
2025-04-28 21:29:37.874 | 2025-04-28 19:29:37,874 - src.affordability_crew.crew - INFO - Found raw JSON in result.raw (first 100 chars): {
2025-04-28 21:29:37.874 | "can_afford": true,
2025-04-28 21:29:37.874 | "confidence": 0.87,
2025-04-28 21:29:37.874 | "risk_factors": [
2025-04-28 21:29:37.874 | "High discretionary spending",
2025-04-28 21:29:37.874 | 2025-04-28 19:29:37,874 - src.affordability_crew.crew - INFO - Successfully parsed JSON from raw string
2025-04-28 21:29:37.874 | 2025-04-28 19:29:37,874 - src.affordability_crew.crew - INFO - Parsed JSON keys: ['can_afford', 'confidence', 'risk_factors', 'recommendations', 'metrics', 'transaction_analysis']
2025-04-28 21:29:37.874 | 2025-04-28 19:29:37,874 - src.affordability_crew.crew - INFO - Found can_afford: True (type: bool)
2025-04-28 21:29:37.875 | 2025-04-28 19:29:37,874 - src.affordability_crew.crew - INFO - Found confidence: 0.87 (type: float)
2025-04-28 21:29:37.873 | INFO:src.affordability_crew.crew:========== PROCESS RESULTS STARTED: crew_finished ==========
2025-04-28 21:29:37.873 | INFO:src.affordability_crew.crew:Event 'crew_finished' detected, extracted result
2025-04-28 21:29:37.873 | INFO:src.affordability_crew.crew:Result Type: <class 'crewai.crews.crew_output.CrewOutput'>
2025-04-28 21:29:37.874 | INFO:src.affordability_crew.crew:Result Content Preview (first 200 chars): {
2025-04-28 21:29:37.874 | "can_afford": true,
2025-04-28 21:29:37.874 | "confidence": 0.87,
2025-04-28 21:29:37.874 | "risk_factors": [
2025-04-28 21:29:37.874 | "High discretionary spending",
2025-04-28 21:29:37.874 | "Existing credit obligations"
2025-04-28 21:29:37.874 | ],
2025-04-28 21:29:37.874 | "recommendations": [
2025-04-28 21:29:37.874 | "Reduce discretionary spending by
2025-04-28 21:29:37.874 | INFO:src.affordability_crew.crew:Starting JSON extraction from result
2025-04-28 21:29:37.874 | INFO:src.affordability_crew.crew:Result has **dict** attribute with keys: ['raw', 'pydantic', 'json_dict', 'tasks_output', 'token_usage']
2025-04-28 21:29:37.874 | INFO:src.affordability_crew.crew:Found raw JSON in result.raw (first 100 chars): {
2025-04-28 21:29:37.874 | "can_afford": true,
2025-04-28 21:29:37.874 | "confidence": 0.87,
2025-04-28 21:29:37.874 | "risk_factors": [
2025-04-28 21:29:37.874 | "High discretionary spending",
2025-04-28 21:29:37.874 | INFO:src.affordability_crew.crew:Successfully parsed JSON from raw string
2025-04-28 21:29:37.874 | INFO:src.affordability_crew.crew:Parsed JSON keys: ['can_afford', 'confidence', 'risk_factors', 'recommendations', 'metrics', 'transaction_analysis']
2025-04-28 21:29:37.874 | INFO:src.affordability_crew.crew:Found can_afford: True (type: bool)
2025-04-28 21:29:37.875 | INFO:src.affordability_crew.crew:Found confidence: 0.87 (type: float)
2025-04-28 21:29:37.875 | INFO:src.affordability_crew.crew:Found risk_factors: 2 items
2025-04-28 21:29:37.875 | INFO:src.affordability_crew.crew:Found recommendations: 3 items
2025-04-28 21:29:37.875 | INFO:src.affordability_crew.crew:Found metrics with keys: ['monthly_income', 'monthly_expenses', 'target_rent', 'rent_to_income_ratio', 'debt_to_income_ratio', 'savings_rate']
2025-04-28 21:29:37.875 | INFO:src.affordability_crew.crew:Found transaction_analysis with keys: ['total_transactions', 'income_transactions', 'expense_transactions']
2025-04-28 21:29:37.875 | INFO:src.affordability_crew.crew:Successfully extracted all available fields from raw JSON
2025-04-28 21:29:37.876 | INFO:src.affordability_crew.crew:Validated 3 recommendations for database constraints
2025-04-28 21:29:37.876 | ERROR:src.affordability_crew.crew:========== PROCESS RESULTS FAILED ==========
2025-04-28 21:29:37.876 | ERROR:src.affordability_crew.crew:Unhandled exception during result processing: argument of type 'int' is not iterable
2025-04-28 21:29:37.876 | ERROR:src.affordability_crew.crew:Exception type: TypeError
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,875 - src.affordability_crew.crew - INFO - Found risk_factors: 2 items
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,875 - src.affordability_crew.crew - INFO - Found recommendations: 3 items
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,875 - src.affordability_crew.crew - INFO - Found metrics with keys: ['monthly_income', 'monthly_expenses', 'target_rent', 'rent_to_income_ratio', 'debt_to_income_ratio', 'savings_rate']
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,875 - src.affordability_crew.crew - INFO - Found transaction_analysis with keys: ['total_transactions', 'income_transactions', 'expense_transactions']
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,875 - src.affordability_crew.crew - INFO - Successfully extracted all available fields from raw JSON
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,875 - src.affordability_crew.crew - INFO - Validated 3 recommendations for database constraints
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,876 - src.affordability_crew.crew - ERROR - ========== PROCESS RESULTS FAILED ==========
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,876 - src.affordability_crew.crew - ERROR - Unhandled exception during result processing: argument of type 'int' is not iterable
2025-04-28 21:29:37.876 | 2025-04-28 19:29:37,876 - src.affordability_crew.crew - ERROR - Exception type: TypeError
2025-04-28 21:29:37.892 | 2025-04-28 19:29:37,891 - src.affordability_crew.crew - ERROR - Stack trace: Traceback (most recent call last):
2025-04-28 21:29:37.892 | File "/app/src/affordability_crew/crew.py", line 476, in process_results
2025-04-28 21:29:37.892 | final_data = self.\_validate_and_complete_output(final_data)
2025-04-28 21:29:37.892 | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-28 21:29:37.892 | File "/app/src/affordability_crew/crew.py", line 238, in \_validate_and_complete_output
2025-04-28 21:29:37.892 | if f not in income_ver or income_ver[f] is None:
2025-04-28 21:29:37.892 | ^^^^^^^^^^^^^^^^^^^
2025-04-28 21:29:37.892 | TypeError: argument of type 'int' is not iterable
2025-04-28 21:29:37.892 | ERROR:src.affordability_crew.crew:Stack trace: Traceback (most recent call last):
2025-04-28 21:29:37.892 | File "/app/src/affordability_crew/crew.py", line 476, in process_results
2025-04-28 21:29:37.892 | final_data = self.\_validate_and_complete_output(final_data)
2025-04-28 21:29:37.892 | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-04-28 21:29:37.892 | File "/app/src/affordability_crew/crew.py", line 238, in \_validate_and_complete_output
2025-04-28 21:29:37.892 | if f not in income_ver or income_ver[f] is None:
2025-04-28 21:29:37.892 | ^^^^^^^^^^^^^^^^^^^
2025-04-28 21:29:37.892 | TypeError: argument of type 'int' is not iterable
2025-04-28 21:29:37.892 |
2025-04-28 21:29:37.892 | ERROR:src.affordability_crew.crew:Original raw result: {
2025-04-28 21:29:37.892 | "can_afford": true,
2025-04-28 21:29:37.892 | "confidence": 0.87,
2025-04-28 21:29:37.892 | "risk_factors": [
2025-04-28 21:29:37.892 | "High discretionary spending",
2025-04-28 21:29:37.892 | "Existing credit obligations"
2025-04-28 21:29:37.892 | ],
2025-04-28 21:29:37.892 | "recommendations": [
2025-04-28 21:29:37.892 | "Reduce discretionary spending by 15% to improve financial health.",
2025-04-28 21:29:37.892 | "Establish an emergency fund to cover at least 3 months of expenses.",
2025-04-28 21:29:37.892 | "Regularly review and manage existing debt obligations."
2025-04-28 21:29:37.892 | ],
2025-04-28 21:29:37.892 | "metrics": {
2025-04-28 21:29:37.892 | "monthly_income": 27500,
2025-04-28 21:29:37.892 | "monthly_expenses": 6425,
2025-04-28 21:29:37.892 | "target_rent": 8250,
2025-04-28 21:29:37.892 | "rent_to_income_ratio": 0.30,
2025-04-28 21:29:37.892 | "debt_to_income_ratio": 0.15,
2025-04-28 21:29:37.892 | "savings_rate": 0.10
2025-04-28 21:29:37.892 | },
2025-04-28 21:29:37.892 | "transaction_analysis": {
2025-04-28 21:29:37.892 | "total_transactions": 120,
2025-04-28 21:29:37.892 | "income_transactions": [
2025-04-28 21:29:37.892 | {
2025-04-28 21:29:37.892 | "date": "2023-09-01",
2025-04-28 21:29:37.892 | "amount": 27500,
2025-04-28 21:29:37.892 | "type": "Salary"
2025-04-28 21:29:37.892 | }
2025-04-28 21:29:37.892 | ],
2025-04-28 21:29:37.892 | "expense_transactions": {
2025-04-28 21:29:37.892 | "necessary_expenses": [
2025-04-28 21:29:37.892 | {
2025-04-28 21:29:37.892 | "date": "2023-09-05",
2025-04-28 21:29:37.892 | "amount": 2000,
2025-04-28 21:29:37.892 | "type": "Groceries"
2025-04-28 21:29:37.892 | },
2025-04-28 21:29:37.892 | {
2025-04-28 21:29:37.892 | "date": "2023-09-10",
2025-04-28 21:29:37.892 | "amount": 1500,
2025-04-28 21:29:37.893 | "type": "Utilities"
2025-04-28 21:29:37.893 | },
2025-04-28 21:29:37.892 |
2025-04-28 21:29:37.892 | 2025-04-28 19:29:37,891 - src.affordability_crew.crew - ERROR - Original raw result: {
2025-04-28 21:29:37.892 | "can_afford": true,
2025-04-28 21:29:37.893 | "confidence": 0.87,
2025-04-28 21:29:37.893 | "risk_factors": [
2025-04-28 21:29:37.893 | "High discretionary spending",
2025-04-28 21:29:37.893 | "Existing credit obligations"
2025-04-28 21:29:37.893 | ],
2025-04-28 21:29:37.893 | "recommendations": [
2025-04-28 21:29:37.893 | "Reduce discretionary spending by 15% to improve financial health.",
2025-04-28 21:29:37.893 | "Establish an emergency fund to cover at least 3 months of expenses.",
2025-04-28 21:29:37.893 | "Regularly review and manage existing debt obligations."
2025-04-28 21:29:37.893 | ],
2025-04-28 21:29:37.893 | "metrics": {
2025-04-28 21:29:37.893 | "monthly_income": 27500,
2025-04-28 21:29:37.893 | "monthly_expenses": 6425,
2025-04-28 21:29:37.893 | "target_rent": 8250,
2025-04-28 21:29:37.893 | "rent_to_income_ratio": 0.30,
2025-04-28 21:29:37.893 | "debt_to_income_ratio": 0.15,
2025-04-28 21:29:37.893 | "savings_rate": 0.10
2025-04-28 21:29:37.893 | },
2025-04-28 21:29:37.893 | "transaction_analysis": {
2025-04-28 21:29:37.893 | "total_transactions": 120,
2025-04-28 21:29:37.893 | "income_transactions": [
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-01",
2025-04-28 21:29:37.893 | "amount": 27500,
2025-04-28 21:29:37.893 | "type": "Salary"
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | ],
2025-04-28 21:29:37.893 | "expense_transactions": {
2025-04-28 21:29:37.893 | "necessary_expenses": [
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-05",
2025-04-28 21:29:37.893 | "amount": 2000,
2025-04-28 21:29:37.893 | "type": "Groceries"
2025-04-28 21:29:37.893 | },
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-10",
2025-04-28 21:29:37.893 | "amount": 1500,
2025-04-28 21:29:37.893 | "type": "Utilities"
2025-04-28 21:29:37.893 | },
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-15",
2025-04-28 21:29:37.893 | "amount": 2000,
2025-04-28 21:29:37.893 | "type": "Transport"
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | ],
2025-04-28 21:29:37.893 | "discretionary_expenses": [
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-20",
2025-04-28 21:29:37.893 | "amount": 1000,
2025-04-28 21:29:37.893 | "type": "Dining out"
2025-04-28 21:29:37.893 | },
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-25",
2025-04-28 21:29:37.893 | "amount": 500,
2025-04-28 21:29:37.893 | "type": "Entertainment"
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | ]
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | INFO: 172.19.0.1:34512 - "POST /analyze-affordability HTTP/1.1" 200 OK
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-15",
2025-04-28 21:29:37.893 | "amount": 2000,
2025-04-28 21:29:37.893 | "type": "Transport"
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | ],
2025-04-28 21:29:37.893 | "discretionary_expenses": [
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-20",
2025-04-28 21:29:37.893 | "amount": 1000,
2025-04-28 21:29:37.893 | "type": "Dining out"
2025-04-28 21:29:37.893 | },
2025-04-28 21:29:37.893 | {
2025-04-28 21:29:37.893 | "date": "2023-09-25",
2025-04-28 21:29:37.893 | "amount": 500,
2025-04-28 21:29:37.893 | "type": "Entertainment"
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | ]
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | }
2025-04-28 21:29:37.893 | }
